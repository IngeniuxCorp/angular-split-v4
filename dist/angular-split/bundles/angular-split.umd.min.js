!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("rxjs/Rx"),require("@angular/common")):"function"==typeof define&&define.amd?define("angular-split",["exports","@angular/core","rxjs/Rx","@angular/common"],t):t((e=e||self)["angular-split"]={},e.ng.core,e.rxjs.Rx,e.ng.common)}(this,(function(e,t,i,n){"use strict";var r=function(){function e(){}return e.isIE=function(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(t>0)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);if(e.indexOf("Trident/")>0){var i=e.indexOf("rv:");return parseInt(e.substring(i+3,e.indexOf(".",i)),10)}var n=e.indexOf("Edge/");return n>0&&parseInt(e.substring(n+5,e.indexOf(".",n)),10)},e}(),s=function(){function e(){}return e.prototype.get=function(e){for(var t=window.top.document.cookie.split("; "),i="",n=0;n<t.length;n++){var r=decodeURIComponent(t[n]),s=r.substring(0,r.indexOf("=")),o=r.substring(r.indexOf("=")+1);if(e==s){i=o;break}}return"undefined"!=i&&null!=i||(i=""),i},e.prototype.set=function(e,t){var i=!0;3==arguments.length&&(i=arguments[2]);var n=e+"="+decodeURIComponent(t)+";";if(1==i){var r=new Date;r.setDate(365+r.getDate()),n=n+" expires="+r.toUTCString()+";"}window.top.document.cookie=n},e}(),o=this&&this.__decorate||function(e,t,i,n){var r,s=arguments.length,o=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,i,o):r(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){},p=function(){function e(e){this.cookieService=e,this.splitName="AngularSplit"}return e.prototype.saveState=function(e){this.cookieService.set(this.splitName,JSON.stringify(e))},e.prototype.loadState=function(){var e=this.cookieService.get(this.splitName);return e?JSON.parse(e):null},e.ctorParameters=function(){return[{type:s}]},e=o([t.Injectable(),a("design:paramtypes",[s])],e)}(),l=this&&this.__decorate||function(e,t,i,n){var r,s=arguments.length,o=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,i,o):r(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},h=function(){function e(e,n,r,s){this.splitStateService=e,this.cdRef=n,this.elementRef=r,this.renderer=s,this.direction="horizontal",this.gutterSize=10,this.disabled=!1,this.animateAreaToggle=!1,this.dragStart=new t.EventEmitter(!1),this.dragProgress=new t.EventEmitter(!1),this.dragEnd=new t.EventEmitter(!1),this.saveStates=!1,this._coverDisplay=new i.BehaviorSubject("none"),this.coverDisplay=this._coverDisplay.asObservable(),this._visibleTransitionEndSub=new i.BehaviorSubject([]),this.visibleTransitionEnd=this._visibleTransitionEndSub.asObservable(),this.minPercent=5,this.areas=[],this.isDragging=!1,this.containerSize=0,this.areaASize=0,this.areaBSize=0,this.eventsDragFct=[]}return Object.defineProperty(e.prototype,"name",{get:function(){return this.splitStateService.splitName},set:function(e){e&&(this.splitStateService.splitName=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"styleFlexDirection",{get:function(){return"vertical"===this.direction},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dragging",{get:function(){return!this.animateAreaToggle||this.isDragging},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"styleWidth",{get:function(){return this.width&&!isNaN(this.width)&&this.width>0?this.width+"px":"100%"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"styleHeight",{get:function(){return this.height&&!isNaN(this.height)&&this.height>0?this.height+"px":"100%"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visibleAreas",{get:function(){return this.areas.filter((function(e){return e.component.visible}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nbGutters",{get:function(){return this.visibleAreas.length-1},enumerable:!0,configurable:!0}),e.prototype.ngOnChanges=function(e){(e.gutterSize||e.disabled)&&this.refresh()},e.prototype.ngAfterViewInit=function(){if(this.saveStates){var e=this.splitStateService.loadState();e&&this.areas.length==e.length&&this.areas.forEach((function(t,i){t.size=e[i].size,t.component.visible=e[i].visible})),this.refresh()}},e.prototype.addArea=function(e,t,i,n){this.areas.push({component:e,orderUser:t,order:-1,sizeUser:i,size:-1,minPixel:n}),this.refresh()},e.prototype.updateArea=function(e,t,i,n){var r=this.areas.find((function(t){return t.component===e}));r&&(r.orderUser=t,r.sizeUser=i,r.minPixel=n,this.refresh())},e.prototype.removeArea=function(e){var t=this.areas.find((function(t){return t.component===e}));if(t){var i=this.areas.indexOf(t);this.areas.splice(i,1),this.areas.forEach((function(e,t){return e.order=2*t})),this.refresh()}},e.prototype.hideArea=function(e){this.areas.find((function(t){return t.component===e}))&&(this._saveState(),this.refresh())},e.prototype.showArea=function(e){this.areas.find((function(t){return t.component===e}))&&(this._saveState(),this.refresh())},e.prototype.isLastVisibleArea=function(e){var t=this.areas.filter((function(e){return e.component.visible}));return t.length>0&&e===t[t.length-1]},e.prototype.refresh=function(){var e=this;this.stopDragging();var t=this.visibleAreas;this.areas.filter((function(e){return null!==e.orderUser&&!isNaN(e.orderUser)})).length===this.areas.length&&this.areas.sort((function(e,t){return+e.orderUser-+t.orderUser})),this.areas.forEach((function(e,t){e.order=2*t,e.component.setStyle("order",e.order)}));var i=t.map((function(e){return e.sizeUser})).reduce((function(e,t){return e+t}),0),n=t.filter((function(t){return null!==t.sizeUser&&!isNaN(t.sizeUser)&&t.sizeUser>=e.minPercent})).length;if(i<99.99||i>100.01||n!==t.length){var r=Number((100/t.length).toFixed(3));t.forEach((function(e){return e.size=r}))}else t.forEach((function(e){return e.size=Number(e.sizeUser)}));this.refreshStyleSizes(),this.cdRef.markForCheck()},e.prototype.refreshStyleSizes=function(){var e=this.visibleAreas,t=this.gutterSize*this.nbGutters/e.length;e.forEach((function(e){return e.component.setStyle("flex-basis","calc( "+e.size+"% - "+t+"px )")})),r.isIE()&&this.notify("visibleTransitionEnd")},e.prototype.startDragging=function(e,t){var i=this;if(e.preventDefault(),!this.disabled){var n=this.areas.find((function(e){return e.order===t-1})),r=this.areas.find((function(e){return e.order===t+1}));if(n&&r){var s,o="horizontal"===this.direction?"offsetWidth":"offsetHeight";if(this.containerSize=this.elementRef.nativeElement[o],this.areaASize=this.containerSize*n.size/100,this.areaBSize=this.containerSize*r.size/100,e instanceof MouseEvent)s={x:e.screenX,y:e.screenY};else{if(!(e instanceof TouchEvent))return;s={x:e.touches[0].screenX,y:e.touches[0].screenY}}this.eventsDragFct.push(this.renderer.listen("document","mousemove",(function(e){return i.dragEvent(e,s,n,r)}))),this.eventsDragFct.push(this.renderer.listen("document","touchmove",(function(e){return i.dragEvent(e,s,n,r)}))),this.eventsDragFct.push(this.renderer.listen("document","mouseup",(function(e){return i.stopDragging()}))),this.eventsDragFct.push(this.renderer.listen("document","touchend",(function(e){return i.stopDragging()}))),this.eventsDragFct.push(this.renderer.listen("document","touchcancel",(function(e){return i.stopDragging()}))),n.component.lockEvents(),r.component.lockEvents(),this.isDragging=!0,this._coverDisplay.next("block"),this.notify("start")}}},e.prototype.dragEvent=function(e,t,i,n){if(this.isDragging){var r;if(e instanceof MouseEvent)r={x:e.screenX,y:e.screenY};else{if(!(e instanceof TouchEvent))return;r={x:e.touches[0].screenX,y:e.touches[0].screenY}}this.drag(t,r,i,n)}},e.prototype.drag=function(e,t,i,n){var r="horizontal"===this.direction?e.x-t.x:e.y-t.y,s=this.areaASize-r,o=this.areaBSize+r;if(!(s<=i.minPixel&&o<n.minPixel)){var a=s/this.containerSize*100,c=o/this.containerSize*100;a<=this.minPercent?(a=this.minPercent,c=i.size+n.size-this.minPercent):c<=this.minPercent?(c=this.minPercent,a=i.size+n.size-this.minPercent):(a=Number(a.toFixed(3)),c=Number((i.size+n.size-a).toFixed(3))),i.size=a,n.size=c,this.refreshStyleSizes(),this.notify("progress")}},e.prototype.stopDragging=function(){if(this.isDragging){for(this.areas.forEach((function(e){return e.component.unlockEvents()}));this.eventsDragFct.length>0;){var e=this.eventsDragFct.pop();e&&e()}this.containerSize=0,this.areaASize=0,this.areaBSize=0,this.isDragging=!1,this._coverDisplay.next("none"),this._saveState(),this.notify("end")}},e.prototype._saveState=function(){this.saveStates&&this.splitStateService.saveState(this.areas.map((function(e){return{size:e.size,visible:e.component.visible}})))},e.prototype.notify=function(e){var t=this.visibleAreas.map((function(e){return e.size}));switch(e){case"start":return this.dragStart.emit(t);case"progress":return this.dragProgress.emit(t);case"end":return this.dragEnd.emit(t);case"visibleTransitionEnd":return this._visibleTransitionEndSub.next(t)}},e.prototype.ngOnDestroy=function(){this.stopDragging()},e.ctorParameters=function(){return[{type:p},{type:t.ChangeDetectorRef},{type:t.ElementRef},{type:t.Renderer2}]},l([t.Input(),u("design:type",String)],e.prototype,"direction",void 0),l([t.Input(),u("design:type",Number)],e.prototype,"width",void 0),l([t.Input(),u("design:type",Number)],e.prototype,"height",void 0),l([t.Input(),u("design:type",Number)],e.prototype,"gutterSize",void 0),l([t.Input(),u("design:type",Boolean)],e.prototype,"disabled",void 0),l([t.Input(),u("design:type",Boolean)],e.prototype,"animateAreaToggle",void 0),l([t.Output(),u("design:type",Object)],e.prototype,"dragStart",void 0),l([t.Output(),u("design:type",Object)],e.prototype,"dragProgress",void 0),l([t.Output(),u("design:type",Object)],e.prototype,"dragEnd",void 0),l([t.Input(),u("design:type",Boolean)],e.prototype,"saveStates",void 0),l([t.Input(),u("design:type",String),u("design:paramtypes",[String])],e.prototype,"name",null),l([t.Output(),u("design:type",i.Observable)],e.prototype,"visibleTransitionEnd",void 0),l([t.HostBinding("class.vertical"),u("design:type",Object),u("design:paramtypes",[])],e.prototype,"styleFlexDirection",null),l([t.HostBinding("class.notrans"),u("design:type",Object),u("design:paramtypes",[])],e.prototype,"dragging",null),l([t.HostBinding("style.width"),u("design:type",Object),u("design:paramtypes",[])],e.prototype,"styleWidth",null),l([t.HostBinding("style.height"),u("design:type",Object),u("design:paramtypes",[])],e.prototype,"styleHeight",null),e=l([t.Component({selector:"split",changeDetection:t.ChangeDetectionStrategy.OnPush,template:'\n        <div #cover style="position:absolute;left:0;top:0;right:0;bottom:0;z-index:100;"\n            [style.display]="coverDisplay | async"></div>\n        <ng-content></ng-content>\n        <ng-template ngFor let-area [ngForOf]="areas" let-index="index" let-last="last">\n            <split-gutter *ngIf="last === false && area.component.visible && !isLastVisibleArea(area)" \n                          [order]="index*2+1"\n                          [direction]="direction"\n                          [size]="gutterSize"\n                          [disabled]="disabled"\n                          (mousedown)="startDragging($event, index*2+1)"\n                          (touchstart)="startDragging($event, index*2+1)"></split-gutter>\n        </ng-template>',styles:["\n        :host {\n            display: flex;\n            flex-wrap: nowrap;\n            justify-content: flex-start;\n            flex-direction: row;\n        }\n\n        :host.vertical {\n            flex-direction: column;\n        }\n\n        split-gutter {\n            flex-grow: 0;\n            flex-shrink: 0;\n            flex-basis: 10px;\n            height: 100%;\n            background-color: #eeeeee;\n            background-position: 50%;\n            background-repeat: no-repeat;\n        }\n\n        :host.vertical split-gutter {\n            width: 100%;\n        }\n\n        :host /deep/ split-area {\n            transition: flex-basis 0.3s;\n        }  \n\n        :host.notrans /deep/ split-area {\n            transition: none !important;\n        }      \n\n        :host /deep/ split-area.notshow {\n            flex-basis: 0 !important;\n            overflow: hidden !important;\n        }      \n\n        :host.vertical /deep/ split-area.notshow {\n            max-width: 0;\n            flex-basis: 0 !important;\n            overflow: hidden !important;\n        }\n    "]}),u("design:paramtypes",[p,t.ChangeDetectorRef,t.ElementRef,t.Renderer2])],e)}(),f=this&&this.__decorate||function(e,t,i,n){var r,s=arguments.length,o=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,i,o):r(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o},d=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},g=function(){function e(e,t,i){this.elementRef=e,this.renderer=t,this.split=i,this._order=null,this._size=null,this._minSizePixel=0,this._visible=!0,this.visibility="block",this.eventsLockFct=[]}return Object.defineProperty(e.prototype,"order",{set:function(e){this._order=isNaN(e)?null:e,this.split.updateArea(this,this._order,this._size,this._minSizePixel)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{set:function(e){this._size=isNaN(e)?null:e,this.split.updateArea(this,this._order,this._size,this._minSizePixel)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minSizePixel",{set:function(e){this._minSizePixel=!isNaN(e)&&e>0?e:0,this.split.updateArea(this,this._order,this._size,this._minSizePixel)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visible",{get:function(){return this._visible},set:function(e){this.visibility=e?"block":"none",this._visible=e,this.visible?this.split.showArea(this):this.split.hideArea(this)},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){this.split.addArea(this,this._order,this._size,this._minSizePixel)},e.prototype.lockEvents=function(){this.eventsLockFct.push(this.renderer.listen(this.elementRef.nativeElement,"selectstart",(function(e){return!1}))),this.eventsLockFct.push(this.renderer.listen(this.elementRef.nativeElement,"dragstart",(function(e){return!1})))},e.prototype.unlockEvents=function(){for(;this.eventsLockFct.length>0;){var e=this.eventsLockFct.pop();e&&e()}},e.prototype.setStyle=function(e,t){this.renderer.setStyle(this.elementRef.nativeElement,e,t)},e.prototype.ngOnDestroy=function(){this.split.removeArea(this)},e.prototype.onSizingTransitionEnd=function(e){e&&"flex-basis"!=e.propertyName||this.split.notify("visibleTransitionEnd")},e.ctorParameters=function(){return[{type:t.ElementRef},{type:t.Renderer2},{type:h}]},f([t.Input(),d("design:type",Number),d("design:paramtypes",[Number])],e.prototype,"order",null),f([t.Input(),d("design:type",Object),d("design:paramtypes",[Object])],e.prototype,"size",null),f([t.Input(),d("design:type",Number),d("design:paramtypes",[Number])],e.prototype,"minSizePixel",null),f([t.Input(),d("design:type",Boolean),d("design:paramtypes",[Boolean])],e.prototype,"visible",null),e=f([t.Directive({selector:"split-area",host:{"[style.flex-grow]":'"0"',"[style.flex-shrink]":'"0"',"[style.overflow-x]":'"hidden"',"[style.overflow-y]":'"auto"',"[style.height]":'"100%"',"[class.notshow]":"!visible","(transitionend)":"onSizingTransitionEnd($event)"}}),d("design:paramtypes",[t.ElementRef,t.Renderer2,h])],e)}(),y=this&&this.__decorate||function(e,t,i,n){var r,s=arguments.length,o=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,i,o):r(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o},m=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},v=function(){function e(e,t){this.elementRef=e,this.renderer=t,this._disabled=!1}return Object.defineProperty(e.prototype,"order",{set:function(e){this.setStyle("order",e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"direction",{set:function(e){this._direction=e,this.refreshStyle()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{set:function(e){this.setStyle("flex-basis",e+"px")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"disabled",{set:function(e){this._disabled=e,this.refreshStyle()},enumerable:!0,configurable:!0}),e.prototype.refreshStyle=function(){var e=!0===this._disabled?"disabled":this._direction;this.setStyle("cursor",this.getCursor(e)),this.setStyle("background-image",'url("'+this.getImage(e)+'")')},e.prototype.setStyle=function(e,t){this.renderer.setStyle(this.elementRef.nativeElement,e,t)},e.prototype.getCursor=function(e){switch(e){case"disabled":return"default";case"vertical":return"row-resize";case"horizontal":return"col-resize"}},e.prototype.getImage=function(e){switch(e){case"disabled":return"";case"vertical":return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAFCAMAAABl/6zIAAAABlBMVEUAAADMzMzIT8AyAAAAAXRSTlMAQObYZgAAABRJREFUeAFjYGRkwIMJSeMHlBkOABP7AEGzSuPKAAAAAElFTkSuQmCC";case"horizontal":return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAeCAYAAADkftS9AAAAIklEQVQoU2M4c+bMfxAGAgYYmwGrIIiDjrELjpo5aiZeMwF+yNnOs5KSvgAAAABJRU5ErkJggg=="}},e.ctorParameters=function(){return[{type:t.ElementRef},{type:t.Renderer2}]},y([t.Input(),m("design:type",Number),m("design:paramtypes",[Number])],e.prototype,"order",null),y([t.Input(),m("design:type",String),m("design:paramtypes",[String])],e.prototype,"direction",null),y([t.Input(),m("design:type",Object),m("design:paramtypes",[Object])],e.prototype,"size",null),y([t.Input(),m("design:type",Boolean),m("design:paramtypes",[Boolean])],e.prototype,"disabled",null),e=y([t.Directive({selector:"split-gutter"}),m("design:paramtypes",[t.ElementRef,t.Renderer2])],e)}(),b=this&&this.__decorate||function(e,t,i,n){var r,s=arguments.length,o=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,i,o):r(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o},S=function(){function e(){}return e=b([t.NgModule({imports:[n.CommonModule],declarations:[h,g,v],exports:[h,g,v],providers:[p,s]})],e)}();e.AngularSplitModule=S,e.BrowserService=r,e.CookieService=s,e.SplitAreaDirective=g,e.SplitAreaState=c,e.SplitComponent=h,e.SplitGutterDirective=v,e.SplitStateService=p,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=angular-split.umd.min.js.map